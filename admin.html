<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Ad Admin Console</title>
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ›°ï¸</text></svg>">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-app">
        <aside class="admin-sidebar">
            <div class="brand">
                <p class="eyebrow">Mr.Young Map</p>
                <h2>Ops Command</h2>
                <span class="beta-pill">live</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#overview" class="active">ğŸ“Š ìš´ì˜ í˜„í™©</a>
                <a href="#regions-panel">ğŸ—ºï¸ ì§€ì—­ ê´€ë¦¬</a>
                <a href="#auctions-panel">ğŸ”¨ ì˜¥ì…˜ ì¶”ì </a>
                <a href="#purchases-panel">ğŸ’¸ ê²°ì œ ê¸°ë¡</a>
                <a href="#reports-panel">ğŸ›¡ï¸ ëª¨ë”ë ˆì´ì…˜</a>
                <a href="#logs-panel">ğŸ“¡ ì‹œìŠ¤í…œ ë¡œê·¸</a>
            </nav>
            <div class="session-summary">
                <p>ì„¸ì…˜ ë§Œë£Œ</p>
                <strong id="admin-session-expiry">-</strong>
                <small>ë§Œë£Œ ì‹œ ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.</small>
            </div>
            <button id="return-to-map-btn" class="secondary-btn">ğŸŒ ë¼ì´ë¸Œ ë§µ ì—´ê¸°</button>
        </aside>
        <main class="admin-main">
            <header class="admin-header" id="overview">
                <div>
                    <p class="eyebrow">GLOBAL AD operations</p>
                    <h1>ê´€ë¦¬ì ì½˜ì†”</h1>
                    <p class="subtitle">ì‹¤ì‹œê°„ ì ìœ  í˜„í™©ê³¼ ì»¤ë®¤ë‹ˆí‹° í’ˆì§ˆì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.</p>
                </div>
                <div class="header-actions">
                    <span class="live-indicator">
                        <span class="dot"></span>
                        <span id="last-refresh-at">-</span>
                    </span>
                    <button id="admin-refresh-btn" class="ghost-btn">ë°ì´í„° ìƒˆë¡œê³ ì¹¨</button>
                    <button id="admin-logout-btn" class="primary-btn">ì„¸ì…˜ ì¢…ë£Œ</button>
                </div>
            </header>

            <section class="stat-grid">
                <article class="stat-card">
                    <div class="stat-label">ì´ ì§€ì—­</div>
                    <div class="stat-value" data-stat="total-regions">--</div>
                    <div class="stat-sub" data-stat="occupancy-rate">ì ìœ ìœ¨ --%</div>
                </article>
                <article class="stat-card">
                    <div class="stat-label">ê´‘ê³  ì§„í–‰ ì¤‘</div>
                    <div class="stat-value" data-stat="occupied-regions">--</div>
                    <div class="stat-sub" data-stat="available-regions">ê°€ìš© ì§€ì—­ --</div>
                </article>
                <article class="stat-card">
                    <div class="stat-label">ëˆ„ì  ìˆ˜ìµ</div>
                    <div class="stat-value" data-stat="total-revenue">$0</div>
                    <div class="stat-sub">PayPal completed</div>
                </article>
                <article class="stat-card">
                    <div class="stat-label">ì§„í–‰ ì¤‘ ì˜¥ì…˜</div>
                    <div class="stat-value" data-stat="active-auctions">--</div>
                    <div class="stat-sub" data-stat="pending-bids">ìµœê·¼ ì…ì°° --ê±´</div>
                </article>
                <article class="stat-card">
                    <div class="stat-label">ì»¤ë®¤ë‹ˆí‹° ìƒê¸ˆ</div>
                    <div class="stat-value" data-stat="community-reward">$0</div>
                    <div class="stat-sub" data-stat="free-pixels">ë¬´ë£Œ í”½ì…€ í’€ 0px</div>
                </article>
                <article class="stat-card">
                    <div class="stat-label">ì²˜ë¦¬ ëŒ€ê¸° ì‹ ê³ </div>
                    <div class="stat-value" data-stat="pending-reports">--</div>
                    <div class="stat-sub">Pixel Studio / ì½˜í…ì¸  ì‹ ê³ </div>
                </article>
            </section>

            <section class="panel-grid">
                <article class="panel" id="regions-panel">
                    <div class="panel-header">
                        <div>
                            <p class="eyebrow">Region control</p>
                            <h2>ìµœìš°ì„  ê´€ë¦¬ ì§€ì—­</h2>
                        </div>
                        <button class="ghost-btn small" id="download-region-csv-btn">CSV ë‚´ë³´ë‚´ê¸°</button>
                    </div>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì§€ì—­</th>
                                    <th>êµ­ê°€</th>
                                    <th>ë‹¨ê°€ (USD)</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì—…ë°ì´íŠ¸</th>
                                </tr>
                            </thead>
                            <tbody id="region-table-body">
                                <tr>
                                    <td colspan="5">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>

                <article class="panel" id="auctions-panel">
                    <div class="panel-header">
                        <div>
                            <p class="eyebrow">Auction monitor</p>
                            <h2>ì§„í–‰ ì¤‘ ì˜¥ì…˜</h2>
                        </div>
                        <span class="chip" id="auction-health-chip">-</span>
                    </div>
                    <ul class="item-list" id="auction-list">
                        <li class="empty">ì˜¥ì…˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
                    </ul>
                </article>
            </section>

            <section class="panel-grid three">
                <article class="panel" id="purchases-panel">
                    <div class="panel-header">
                        <div>
                            <p class="eyebrow">Settlement</p>
                            <h2>ìµœê·¼ ê²°ì œ</h2>
                        </div>
                    </div>
                    <ul class="item-list timeline" id="purchase-list">
                        <li class="empty">ê²°ì œ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
                    </ul>
                </article>

                <article class="panel" id="reports-panel">
                    <div class="panel-header">
                        <div>
                            <p class="eyebrow">Moderation</p>
                            <h2>ì‹ ê³  / ê²€í† </h2>
                        </div>
                        <button class="ghost-btn small" id="open-map-moderation-btn">ëª¨ë”ë ˆì´ì…˜ íŒ¨ë„</button>
                    </div>
                    <ul class="item-list" id="report-list">
                        <li class="empty">ì‹ ê³  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
                    </ul>
                </article>

                <article class="panel" id="logs-panel">
                    <div class="panel-header">
                        <div>
                            <p class="eyebrow">Telemetry</p>
                            <h2>ì‹¤ì‹œê°„ ë¡œê·¸</h2>
                        </div>
                        <button class="ghost-btn small" id="copy-log-btn">ë‚´ë³´ë‚´ê¸°</button>
                    </div>
                    <div class="log-section">
                        <h3>ì‹œìŠ¤í…œ ë¡œê·¸</h3>
                        <ul class="log-list" id="log-list">
                            <li class="empty">ë¡œê·¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
                        </ul>
                    </div>
                    <div class="log-section">
                        <h3>ê°ì‚¬ ë¡œê·¸</h3>
                        <ul class="log-list" id="audit-log-list">
                            <li class="empty">ê°ì‚¬ ë¡œê·¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
                        </ul>
                    </div>
                </article>
            </section>
        </main>
    </div>

    <div id="admin-toast" class="toast hidden"></div>

    <script src="cache-utils.js"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAa0BTlcqX9T1PYaHTiv3CmjmZ6srmdZVY",
            authDomain: "worldad-8be07.firebaseapp.com",
            projectId: "worldad-8be07",
            storageBucket: "worldad-8be07.firebasestorage.app",
            messagingSenderId: "460480155784",
            appId: "1:460480155784:web:68e6cea86cf492b3b64f3d",
            measurementId: "G-L2WYZGZK90"
        };

        window.firebaseModules = { initializeApp, getAuth, getFirestore, firebaseConfig };
    </script>
    <script type="module" src="admin.js"></script>
</body>
</html>


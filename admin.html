<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드 - Billionaire Map</title>
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚙️</text></svg>">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    
    <!-- Admin CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div id="admin-app">
        <!-- 로그인 화면 -->
        <div id="login-screen" class="login-screen">
            <div class="login-card">
                <div class="login-header">
                    <h1>🔐 관리자 로그인</h1>
                    <p>Billionaire Map 관리 센터</p>
                </div>
                <form id="admin-login-form">
                    <div class="form-group">
                        <label>이메일</label>
                        <input type="email" id="admin-email" required placeholder="admin@example.com">
                    </div>
                    <div class="form-group">
                        <label>비밀번호</label>
                        <input type="password" id="admin-password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">
                        로그인
                    </button>
                    <div id="login-error" class="error-message hidden"></div>
                </form>
                <div class="login-footer">
                    <a href="index.html">← 지도로 돌아가기</a>
                </div>
            </div>
        </div>
        
        <!-- 관리자 대시보드 -->
        <div id="admin-dashboard" class="admin-dashboard hidden">
            <!-- 사이드바 -->
            <aside class="admin-sidebar">
                <div class="sidebar-header">
                    <h2>⚙️ 관리자</h2>
                    <span class="admin-badge">v2.0</span>
                </div>
                
                <nav class="sidebar-nav">
                    <button class="nav-item active" data-section="overview">
                        📊 대시보드
                    </button>
                    <button class="nav-item" data-section="users">
                        👥 사용자 관리
                    </button>
                    <button class="nav-item" data-section="territories">
                        🗺️ 영토 관리
                    </button>
                    <button class="nav-item" data-section="auctions">
                        💰 옥션 관리
                    </button>
                    <button class="nav-item" data-section="analytics">
                        📈 분석
                    </button>
                    <button class="nav-item" data-section="logs">
                        📝 로그
                    </button>
                    <button class="nav-item" data-section="settings">
                        ⚙️ 설정
                    </button>
                </nav>
                
                <div class="sidebar-footer">
                    <button id="user-mode-btn" class="btn btn-secondary btn-full">
                        🎭 사용자 모드
                    </button>
                    <button id="admin-logout-btn" class="btn btn-outline btn-full">
                        🚪 로그아웃
                    </button>
                </div>
            </aside>
            
            <!-- 메인 콘텐츠 -->
            <main class="admin-main">
                <header class="admin-header">
                    <div class="header-left">
                        <h1 id="section-title">대시보드</h1>
                        <span class="last-updated">마지막 업데이트: <span id="last-update-time">--</span></span>
                    </div>
                    <div class="header-right">
                        <button id="refresh-btn" class="btn btn-icon" title="새로고침">
                            🔄
                        </button>
                        <div class="admin-user">
                            <span id="admin-name">관리자</span>
                            <span class="admin-role">최고 관리자</span>
                        </div>
                    </div>
                </header>
                
                <div class="admin-content">
                    <!-- 대시보드 섹션 -->
                    <section id="section-overview" class="admin-section active">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">👥</div>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-users">--</span>
                                    <span class="stat-label">총 사용자</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">🗺️</div>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-territories">--</span>
                                    <span class="stat-label">점유된 영토</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">💰</div>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-revenue">--</span>
                                    <span class="stat-label">총 수익</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">⚡</div>
                                <div class="stat-info">
                                    <span class="stat-value" id="stat-active">--</span>
                                    <span class="stat-label">진행 중인 옥션</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-grid">
                            <div class="dashboard-card">
                                <h3>📈 최근 활동</h3>
                                <div id="recent-activity" class="activity-list">
                                    <div class="loading">로딩 중...</div>
                                </div>
                            </div>
                            <div class="dashboard-card">
                                <h3>🏆 상위 사용자</h3>
                                <div id="top-users" class="user-list">
                                    <div class="loading">로딩 중...</div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- 사용자 관리 섹션 -->
                    <section id="section-users" class="admin-section">
                        <div class="section-header">
                            <div class="search-box">
                                <input type="text" id="user-search" placeholder="사용자 검색...">
                            </div>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all">전체</button>
                                <button class="filter-btn" data-filter="active">활성</button>
                                <button class="filter-btn" data-filter="banned">차단됨</button>
                            </div>
                        </div>
                        <div class="data-table-wrapper">
                            <table class="data-table" id="users-table">
                                <thead>
                                    <tr>
                                        <th>사용자</th>
                                        <th>이메일</th>
                                        <th>영토 수</th>
                                        <th>가입일</th>
                                        <th>상태</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="6" class="loading">로딩 중...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    
                    <!-- 영토 관리 섹션 -->
                    <section id="section-territories" class="admin-section">
                        <div class="section-header">
                            <div class="search-box">
                                <input type="text" id="territory-search" placeholder="영토 검색...">
                            </div>
                            <select id="country-filter">
                                <option value="">전체 국가</option>
                            </select>
                        </div>
                        <div class="data-table-wrapper">
                            <table class="data-table" id="territories-table">
                                <thead>
                                    <tr>
                                        <th>영토명</th>
                                        <th>국가</th>
                                        <th>소유자</th>
                                        <th>가격</th>
                                        <th>픽셀</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="6" class="loading">로딩 중...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    
                    <!-- 옥션 관리 섹션 -->
                    <section id="section-auctions" class="admin-section">
                        <div class="section-header">
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="active">진행 중</button>
                                <button class="filter-btn" data-filter="ended">종료됨</button>
                                <button class="filter-btn" data-filter="all">전체</button>
                            </div>
                        </div>
                        <div class="data-table-wrapper">
                            <table class="data-table" id="auctions-table">
                                <thead>
                                    <tr>
                                        <th>영토</th>
                                        <th>현재 입찰가</th>
                                        <th>입찰자 수</th>
                                        <th>종료 시간</th>
                                        <th>상태</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="6" class="loading">로딩 중...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    
                    <!-- 분석 섹션 -->
                    <section id="section-analytics" class="admin-section">
                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <h3>📊 수익 추이</h3>
                                <div class="chart-placeholder">
                                    <p>📈 차트 준비 중</p>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <h3>🌍 영토 분포</h3>
                                <div class="chart-placeholder">
                                    <p>🗺️ 맵 차트 준비 중</p>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <h3>👥 사용자 성장</h3>
                                <div class="chart-placeholder">
                                    <p>📈 성장 차트 준비 중</p>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <h3>💰 옥션 통계</h3>
                                <div class="chart-placeholder">
                                    <p>📊 통계 준비 중</p>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- 로그 섹션 -->
                    <section id="section-logs" class="admin-section">
                        <div class="section-header">
                            <h3>📝 관리자 활동 로그</h3>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all">전체</button>
                                <button class="filter-btn" data-filter="user">사용자</button>
                                <button class="filter-btn" data-filter="territory">영토</button>
                                <button class="filter-btn" data-filter="auction">옥션</button>
                            </div>
                        </div>
                        <div id="admin-logs" class="logs-container">
                            <div class="loading">로그 로딩 중...</div>
                        </div>
                    </section>
                    
                    <!-- 설정 섹션 -->
                    <section id="section-settings" class="admin-section">
                        <div class="settings-grid">
                            <div class="settings-card">
                                <h3>⚙️ 일반 설정</h3>
                                <div class="settings-form">
                                    <div class="form-group">
                                        <label>사이트명</label>
                                        <input type="text" value="Billionaire Map" id="setting-site-name">
                                    </div>
                                    <div class="form-group">
                                        <label>기본 통화</label>
                                        <select id="setting-currency">
                                            <option value="USD">USD ($)</option>
                                            <option value="EUR">EUR (€)</option>
                                            <option value="KRW">KRW (₩)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>최소 입찰 증가율 (%)</label>
                                        <input type="number" value="5" id="setting-bid-increment">
                                    </div>
                                    <button class="btn btn-primary">설정 저장</button>
                                </div>
                            </div>
                            
                            <div class="settings-card">
                                <h3>🔐 관리자 계정</h3>
                                <div id="admin-list" class="admin-list">
                                    <div class="admin-item">
                                        <span>admin@billionairemap.com</span>
                                        <span class="badge">최고 관리자</span>
                                    </div>
                                </div>
                                <button class="btn btn-secondary">+ 관리자 추가</button>
                            </div>
                            
                            <div class="settings-card">
                                <h3>💾 데이터 관리</h3>
                                <p class="card-description">Firestore 데이터 백업 및 복원</p>
                                <div class="data-actions">
                                    <button id="backup-btn" class="btn btn-secondary" onclick="adminDashboard.backupData()">
                                        📥 데이터 백업
                                    </button>
                                    <button id="restore-btn" class="btn btn-secondary" onclick="adminDashboard.restoreData()">
                                        📤 데이터 복원
                                    </button>
                                    <button class="btn btn-danger">🗑️ 캐시 삭제</button>
                                </div>
                                <p class="data-warning">⚠️ 복원 시 기존 데이터가 덮어쓰기 됩니다. 주의하세요.</p>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
        
        <!-- 사용자 모드 배너 -->
        <div id="user-mode-banner" class="user-mode-banner hidden">
            <span>🎭 일반 사용자로 보는 중</span>
            <button id="exit-user-mode" class="btn btn-sm">사용자 모드 종료</button>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    
    <!-- Admin Module -->
    <script type="module" src="js/admin.js"></script>
</body>
</html>

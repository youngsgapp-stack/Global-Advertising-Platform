[build]
  # 빌드 명령어 (정적 사이트이므로 빌드 불필요)
  command = ""
  # 배포 디렉토리 (루트 디렉토리)
  publish = "."

# 리다이렉트 규칙 (SPA 리다이렉트보다 우선)
[[redirects]]
  from = "/data/*"
  to = "/data/:splat"
  status = 200
  force = true

[[headers]]
  # 모든 파일에 대한 헤더 설정
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
  # GeoJSON 파일에 대한 CORS 헤더 설정
  for = "/data/*.geojson"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Content-Type = "application/geo+json"
    Cache-Control = "public, max-age=3600"

# 정적 자산 캐싱 (JS, CSS, 이미지)
[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age=2592000"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=2592000"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.jpeg"
  [headers.values]
    Cache-Control = "public, max-age=2592000"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.svg"
  [headers.values]
    Cache-Control = "public, max-age=2592000"
    X-Content-Type-Options = "nosniff"

[[headers]]
  for = "/*.webp"
  [headers.values]
    Cache-Control = "public, max-age=2592000"
    X-Content-Type-Options = "nosniff"

# HTML 파일은 짧은 캐시 (SPA 업데이트 대비)
[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=300, must-revalidate"

# JSON 데이터 (랭킹, 통계 등)
[[headers]]
  for = "/api/rankings/*"
  [headers.values]
    Cache-Control = "public, max-age=300"
    Content-Type = "application/json"

[[headers]]
  for = "/api/stats/*"
  [headers.values]
    Cache-Control = "public, max-age=300"
    Content-Type = "application/json"


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billionaire Map - Own a Piece of Earth</title>
    <meta name="description" content="Claim your spot on the world map, decorate with pixels, and climb the rankings!">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“</text></svg>">
    
    <!-- Mapbox GL JS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
    
    <!-- Google Fonts - Pretendard -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    
    <!-- v2 CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/panels.css">
    <link rel="stylesheet" href="css/pixel-editor.css">
    <link rel="stylesheet" href="css/ranking.css">
    <link rel="stylesheet" href="css/timeline.css">
    <link rel="stylesheet" href="css/recommendation.css">
    
    <style>
        /* Additional inline styles (fast loading) */
        body {
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            animation-delay: 0.2s;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="map-container">
        <!-- Stars Background Canvas -->
        <canvas id="stars-canvas"></canvas>
        
        <!-- Mapbox Map -->
        <div id="map"></div>
        
        <!-- Hamburger Menu Button -->
        <button id="hamburger-menu-btn" class="hamburger-menu-btn" aria-label="Open menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <!-- Side Menu -->
        <aside id="side-menu" class="side-menu hidden">
            <div class="side-menu-header">
                <h3>ğŸ“ Menu</h3>
                <button id="close-side-menu" class="close-btn" aria-label="Close menu">&times;</button>
            </div>
            <div class="side-menu-content">
                <!-- User Section -->
                <section class="side-menu-section">
                    <h4>ğŸ‘¤ Account</h4>
                    <button id="side-user-login-btn" class="side-menu-btn">
                        ğŸ” Sign In
                    </button>
                    <button id="side-user-logout-btn" class="side-menu-btn hidden">
                        ğŸšª Sign Out
                    </button>
                    <span id="side-user-email" class="side-user-email hidden"></span>
                </section>
                
                <!-- Ranking Section -->
                <section class="side-menu-section">
                    <h4>ğŸ† Rankings</h4>
                    <button id="side-ranking-btn" class="side-menu-btn">
                        ğŸ“Š Top Owners
                    </button>
                    <button id="side-my-territories-btn" class="side-menu-btn">
                        ğŸ“ My Spots
                    </button>
                </section>
                
                <!-- Help Section -->
                <section class="side-menu-section">
                    <h4>â“ Help</h4>
                    <button id="side-help-btn" class="side-menu-btn">
                        ğŸ“– How to Play
                    </button>
                    <button id="side-about-btn" class="side-menu-btn">
                        â„¹ï¸ About
                    </button>
                </section>
                
                <!-- Version Info -->
                <div class="version-info" style="margin-top: auto; padding-top: 20px; text-align: center; color: var(--color-text-muted); font-size: 12px;">
                    v2.0.0 Â· Own a Piece ğŸŒ
                </div>
            </div>
        </aside>
        
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>ğŸ“ Billionaire Map</h1>
                <p>Own a Piece of Earth</p>
            </div>
        </header>
        
        <!-- View Mode Toggle & Country Selector -->
        <div class="map-controls">
            <button id="view-mode-toggle" class="view-toggle-btn" title="Toggle World/Country View">
                ğŸŒ World
            </button>
            <div class="map-mode-toggle">
                <select id="country-selector">
                    <option value="">Select Country...</option>
                </select>
            </div>
        </div>
        
        <!-- Territory Panel (dynamically rendered) -->
        <div id="territory-panel" class="territory-panel hidden"></div>
        
        <!-- Ranking Board -->
        <aside class="ranking-board" id="ranking-board">
            <!-- RankingBoard.jsì—ì„œ ë™ì  ë Œë”ë§ -->
        </aside>
        
        <!-- Mobile Ranking Button -->
        <button class="ranking-mobile-btn" id="ranking-mobile-btn" title="View Rankings">ğŸ†</button>
        
        <!-- Timeline Widget -->
        <aside class="timeline-widget" id="timeline-widget">
            <div class="timeline-header">
                <h4>ğŸ“œ Live Activity</h4>
                <button class="timeline-toggle" id="timeline-toggle">âˆ’</button>
            </div>
            <div class="timeline-content" id="timeline-content">
                <!-- Rendered by HistoryLogger -->
            </div>
        </aside>
        
        <!-- Loading Indicator -->
        <div id="loading">
            <div class="spinner"></div>
            <p>ğŸŒ Loading the world...</p>
        </div>
        
        <!-- Admin Login Modal (Pí‚¤ 5ë²ˆ ì—°íƒ€ë¡œ ì—´ê¸°) -->
        <div id="admin-login-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content admin-modal">
                <button class="modal-close" id="close-admin-modal">&times;</button>
                <div class="modal-header">
                    <h2>ğŸ” Admin Access</h2>
                    <p>ê´€ë¦¬ì ë¡œê·¸ì¸</p>
                </div>
                <form id="admin-login-form-main">
                    <div class="form-group">
                        <label for="admin-id">Admin ID</label>
                        <input type="text" id="admin-id" placeholder="Enter admin ID" required>
                    </div>
                    <div class="form-group">
                        <label for="admin-pwd">Password</label>
                        <input type="password" id="admin-pwd" placeholder="Enter password" required>
                    </div>
                    <button type="submit" class="btn-primary btn-full">
                        ğŸ”“ Login
                    </button>
                    <div id="admin-login-error" class="error-message hidden"></div>
                </form>
                <div class="modal-footer">
                    <small>ğŸ’¡ Pí‚¤ 5ë²ˆ ì—°íƒ€ë¡œ ì´ ëª¨ë‹¬ì„ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                </div>
            </div>
        </div>
        
        <!-- ê´€ë¦¬ì ì‚¬ìš©ì ëª¨ë“œ ë°°ë„ˆ -->
        <div id="admin-user-mode-banner" class="admin-user-mode-banner hidden">
            <span>ğŸ­ ê´€ë¦¬ìë¡œ ì‚¬ìš©ì ì²´í—˜ ì¤‘</span>
            <button id="back-to-admin" class="btn-back-admin">ê´€ë¦¬ì í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>
    
    <!-- Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AQirNO21I_osrvoS7tvhGdtpGiv9sQC8k0XCurV-xZJZNY5ZnMn_64uwppCgscPbIfX2m1Nn9Z-TTPVp&currency=USD" async></script>
    
    <!-- v2 App Module -->
    <script type="module" src="js/app.js"></script>
</body>
</html>

